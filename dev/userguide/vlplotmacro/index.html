<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>The @vlplot command · VegaLite.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">VegaLite.jl</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../../gettingstarted/installation/">Installation</a></li><li><a class="tocitem" href="../../gettingstarted/tutorial/">Tutorial</a></li></ul></li><li><span class="tocitem">User Guide</span><ul><li><a class="tocitem" href="../vlspec/">Vega-lite specifications</a></li><li class="is-active"><a class="tocitem" href>The @vlplot command</a><ul class="internal"><li><a class="tocitem" href="#JSON-syntax-vs-@vlplot-macro-1"><span>JSON syntax vs <code>@vlplot</code> macro</span></a></li><li><a class="tocitem" href="#Symbols-instead-of-Strings-1"><span>Symbols instead of Strings</span></a></li><li><a class="tocitem" href="#Shorthand-string-syntax-for-encodings-1"><span>Shorthand string syntax for encodings</span></a></li><li><a class="tocitem" href="#Shorthands-for-the-encoding-element-1"><span>Shorthands for the <code>encoding</code> element</span></a></li><li><a class="tocitem" href="#Mark-shorthands-1"><span>Mark shorthands</span></a></li><li><a class="tocitem" href="#x-and-y-encoding-channel-as-positional-arguments-1"><span><code>x</code> and <code>y</code> encoding channel as positional arguments</span></a></li></ul></li><li><a class="tocitem" href="../data/">Data sources</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><input class="collapse-toggle" id="menuitem-4-1" type="checkbox"/><label class="tocitem" for="menuitem-4-1"><span class="docs-label">Single-View Plots</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/examples_barcharts/">Bar Charts</a></li><li><a class="tocitem" href="../../examples/examples_histograms/">Histograms, Density Plots, and Dot Plots</a></li><li><a class="tocitem" href="../../examples/examples_scatter_strip_plots/">Scatter &amp; Strip Plots</a></li><li><a class="tocitem" href="../../examples/examples_line_charts/">Line Charts</a></li><li><a class="tocitem" href="../../examples/examples_area_Charts_streamgraphs/">Area Charts &amp; Streamgraphs</a></li><li><a class="tocitem" href="../../examples/examples_table_based_plots/">Table-based Plots</a></li><li><a class="tocitem" href="../../examples/examples_circular_plots/">Circular Plots</a></li><li><a class="tocitem" href="../../examples/examples_advancedcalculations/">Advanced Calculations</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2"><span class="docs-label">Composite Mark</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/examples_error_bars_bands/">Error Bars &amp; Error Bands</a></li><li><a class="tocitem" href="../../examples/examples_box_plots/">Box Plots</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-3" type="checkbox"/><label class="tocitem" for="menuitem-4-3"><span class="docs-label">Multi-View Displays</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/examples_faceting/">Faceting (Trellis Plot / Small Multiples)</a></li><li><a class="tocitem" href="../../examples/examples_repeat_concatenation/">Repeat &amp; Concatenation</a></li></ul></li><li><a class="tocitem" href="../../examples/examples_maps/">Maps (Geographic Displays)</a></li></ul></li><li><span class="tocitem">Reference Manual</span><ul><li><a class="tocitem" href="../../referencemanual/global/">Global settings</a></li><li><a class="tocitem" href="../../referencemanual/output/">Outputs</a></li><li><a class="tocitem" href="../../referencemanual/performance/">Performance tips</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">User Guide</a></li><li class="is-active"><a href>The @vlplot command</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>The @vlplot command</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/queryverse/VegaLite.jl/blob/master/docs/src/userguide/vlplotmacro.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="The-@vlplot-command-1"><a class="docs-heading-anchor" href="#The-@vlplot-command-1">The @vlplot command</a><a class="docs-heading-anchor-permalink" href="#The-@vlplot-command-1" title="Permalink"></a></h1><p>The <code>@vlplot</code> macro is the main method to create Vega-Lite plots from Julia. The macro accepts arguments that look almost identical to the original Vega-Lite JSON syntax. It should therefore be very easy to take any given Vega-Lite JSON example and translate it into a corresponding <code>@vlplot</code> macro call. The macro also provides a number of shorthands that make it easy to create very compact plot specifications. This section will first review the difference between the original JSON Vega-Lite syntax and the <code>@vlplot</code> macro, and then discuss the various shorthands that users will typically use.</p><h2 id="JSON-syntax-vs-@vlplot-macro-1"><a class="docs-heading-anchor" href="#JSON-syntax-vs-@vlplot-macro-1">JSON syntax vs <code>@vlplot</code> macro</a><a class="docs-heading-anchor-permalink" href="#JSON-syntax-vs-@vlplot-macro-1" title="Permalink"></a></h2><p>A very simple <a href="https://vega.github.io/vega-lite/">Vega-Lite</a> JSON specification looks like this:</p><pre><code class="language-json">{
  &quot;data&quot;: {
    &quot;values&quot;: [
      {&quot;a&quot;: &quot;A&quot;,&quot;b&quot;: 28}, {&quot;a&quot;: &quot;B&quot;,&quot;b&quot;: 55}, {&quot;a&quot;: &quot;C&quot;,&quot;b&quot;: 43},
      {&quot;a&quot;: &quot;D&quot;,&quot;b&quot;: 91}, {&quot;a&quot;: &quot;E&quot;,&quot;b&quot;: 81}, {&quot;a&quot;: &quot;F&quot;,&quot;b&quot;: 53},
      {&quot;a&quot;: &quot;G&quot;,&quot;b&quot;: 19}, {&quot;a&quot;: &quot;H&quot;,&quot;b&quot;: 87}, {&quot;a&quot;: &quot;I&quot;,&quot;b&quot;: 52}
    ]
  },
  &quot;mark&quot;: &quot;bar&quot;,
  &quot;encoding&quot;: {
    &quot;x&quot;: {&quot;field&quot;: &quot;a&quot;, &quot;type&quot;: &quot;ordinal&quot;},
    &quot;y&quot;: {&quot;field&quot;: &quot;b&quot;, &quot;type&quot;: &quot;quantitative&quot;}
  }
}</code></pre><p>This can be directly translated into the following <code>@vlplot</code> macro call:</p><pre><code class="language-julia">using VegaLite

@vlplot(
    data={
        values=[
            {a=&quot;A&quot;,b=28},{a=&quot;B&quot;,b=55},{a=&quot;C&quot;,b=43},
            {a=&quot;D&quot;,b=91},{a=&quot;E&quot;,b=81},{a=&quot;F&quot;,b=53},
            {a=&quot;G&quot;,b=19},{a=&quot;H&quot;,b=87},{a=&quot;I&quot;,b=52}
        ]
    },
    mark=&quot;bar&quot;,
    encoding={
        x={field=&quot;a&quot;, type=&quot;ordinal&quot;},
        y={field=&quot;b&quot;, type=&quot;quantitative&quot;}
    }
)</code></pre><p>We had to make the following adjustments to the original JSON specification:</p><ol><li>The outer pair of <code>{}</code> brackets was removed, the parenthesis <code>()</code> of the macro call instead deliminate the beginning and end of the specification.</li><li>The quotation marks <code>&quot;</code> around keys like <code>mark</code> are removed.</li><li>The JSON key-value separator <code>:</code> was replaced with <code>=</code>.</li><li>Any <code>null</code> value in the JSON specification should be replaced with <code>nothing</code> in the <code>@vlplot</code> call.</li></ol><p>These four rules should be sufficient to translate any valid JSON Vega-Lite specification into a corresponding <code>@vlplot</code> macro call.</p><h2 id="Symbols-instead-of-Strings-1"><a class="docs-heading-anchor" href="#Symbols-instead-of-Strings-1">Symbols instead of Strings</a><a class="docs-heading-anchor-permalink" href="#Symbols-instead-of-Strings-1" title="Permalink"></a></h2><p>A first shorthand provided by the <code>@vlplot</code> macro is that you can use a <code>Symbol</code> on the right hand side of any key-value pair instead of a <code>String</code>. For example, instead of writing <code>mark=&quot;bar&quot;</code>, you can write <code>mark=:bar</code>.</p><p>The following example demonstrates this in the context of a full plotting example:</p><pre><code class="language-julia">data |&gt;
@vlplot(
    mark=:point, # Note how we use :point instead of &quot;point&quot; here
    encoding={
        x={
            field=:a, # Note how we use :a instead of &quot;a&quot; here
            type=:ordinal # Note how we use :ordinal instead of &quot;ordinal&quot; here
        },
        y={
            field=:b, # Note how we use :b instead of &quot;b&quot; here
            type=:quantitative # Note how we use :quantitative instead of &quot;quantitative&quot; here
        }
    }
)</code></pre><h2 id="Shorthand-string-syntax-for-encodings-1"><a class="docs-heading-anchor" href="#Shorthand-string-syntax-for-encodings-1">Shorthand string syntax for encodings</a><a class="docs-heading-anchor-permalink" href="#Shorthand-string-syntax-for-encodings-1" title="Permalink"></a></h2><p><a href="https://github.com/queryverse/VegaLite.jl">VegaLite.jl</a> provides a similar string shorthand syntax for encodings as <a href="https://altair-viz.github.io/">Altair</a> (the Python wrapper around Vega-Lite).</p><p>Almost any channel encoding in a specification will have the keys <code>field</code> and <code>type</code>, as in <code>x={field=:a, type=:ordinal}</code>. Because these patterns are so common, we provide a shorthand string syntax for this case. Using the shorthand one can write the channel encoding as <code>x={&quot;a:o&quot;}</code>. These string shorthands have to appear as the first positional argument inside the curly brackets <code>{}</code> for the encoding channel. The pattern inside the string is that one specifies the name of the field before the <code>:</code>, and then the first letter of the type of encoding (<code>o</code> for ordinal, <code>q</code> for quantitative etc.).</p><p>The string shorthand also extends to the <code>timeUnit</code> and <code>aggregate</code> key in encodings. Aggregation functions and time units can be specified using a function call syntax inside the string shorthand. For example, <code>x={&quot;mean(foo)&quot;}</code> is equivalent to <code>x={field=:foo, aggregate=:mean, type=:quantitative}</code> (note that we don&#39;t have to specify the type explicitly when we use aggregations, the default assumption is that the result of an aggregation is quantitative). An example that uses the shorthand for a time unit is <code>x={&quot;year(foo):t&quot;}</code>, which is equivalent to <code>x={field=:foo, timeUnit=:year, type=:quantitative}</code>. For aggregations that don&#39;t require a field name (e.g. the <code>count</code> aggregation), you can just write <code>x=&quot;count()&quot;</code>.</p><p>String shorthands can be combined with any other attributes. For example, the following example shows how one can specify an axis title and still use the string shorthand notation:</p><pre><code class="language-julia">x={&quot;foo:q&quot;, axis={title=&quot;some title&quot;}}</code></pre><p>In cases where you don&#39;t want to specify any other attributes than what can be expressed in the string shorthand you don&#39;t have to use the surrounding curly brackets <code>{}</code> for the encoding: <code>x=&quot;foo:q&quot;</code> is equivalent to <code>x={field=:foo, type=:quantitative}</code>. If you only want to specify the field and not even the type, you can resort to using a <code>Symbol</code>: <code>x=:foo</code> is also a valid encoding.</p><p>The shorthand string syntax allows us to write the specification of the plot from the previous section in this much more concise format:</p><pre><code class="language-julia">data |&gt;
@vlplot(
    mark=:point,
    encoding={
        x=&quot;a:o&quot;,
        y=:b
    }
)</code></pre><h2 id="Shorthands-for-the-encoding-element-1"><a class="docs-heading-anchor" href="#Shorthands-for-the-encoding-element-1">Shorthands for the <code>encoding</code> element</a><a class="docs-heading-anchor-permalink" href="#Shorthands-for-the-encoding-element-1" title="Permalink"></a></h2><p>There are two shorthands for the <code>encoding</code> element in a plot specification.</p><p>The first is to simply write <code>enc</code> instead of <code>encoding</code>. For example, the previous specification can be written as</p><pre><code class="language-julia">data |&gt;
@vlplot(
    mark=:point,
    enc={
        x=&quot;a:o&quot;,
        y=:b
    }
)</code></pre><p>An even shorter notation is to just leave the level of the <code>encoding</code> element away and place the channel encodings directly into the top level specification. With that option you would write the previous example as:</p><pre><code class="language-julia">data |&gt;
@vlplot(mark=:point, x=&quot;a:o&quot;, y=:b)</code></pre><h2 id="Mark-shorthands-1"><a class="docs-heading-anchor" href="#Mark-shorthands-1">Mark shorthands</a><a class="docs-heading-anchor-permalink" href="#Mark-shorthands-1" title="Permalink"></a></h2><p>There are two shorthands for the <code>mark</code> attribute in a specification. The first option is to use the first positional argument in a <code>@vlplot</code> call to specify the mark type. This only works if you don&#39;t want to specify any other mark attributes. For example, the previous plot can now be written as</p><pre><code class="language-julia">data |&gt; @vlplot(:point, x=&quot;a:o&quot;, y=:b)</code></pre><p>If you want to specify more mark attributes, you can reintroduce curly brackets <code>{}</code>, and then specify the type of the mark as the first positional argument inside the <code>mark</code> block. For example, the following code specifies that the mark color should be red, in addition to picking points as the mark type:</p><pre><code class="language-julia">data |&gt;
@vlplot(
    mark={:point, color=:red},
    x=&quot;a:o&quot;,
    y=:b
)</code></pre><h2 id="x-and-y-encoding-channel-as-positional-arguments-1"><a class="docs-heading-anchor" href="#x-and-y-encoding-channel-as-positional-arguments-1"><code>x</code> and <code>y</code> encoding channel as positional arguments</a><a class="docs-heading-anchor-permalink" href="#x-and-y-encoding-channel-as-positional-arguments-1" title="Permalink"></a></h2><p>For the <code>x</code> and <code>y</code> encoding channel only, you can specify their values as the second and third positional element at the root level of the <code>@vlplot</code> call instead of using named arguments. In particular, you can write <code>@vlplot(:point, :colA, :colB)</code> instead of <code>@vlplot(:point, x=:colA, y=:colB)</code> or <code>@vlplot(:point, :colA)</code> instead of <code>@vlplot(:point, x=:colA)</code>.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../vlspec/">« Vega-lite specifications</a><a class="docs-footer-nextpage" href="../data/">Data sources »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Monday 17 April 2023 22:57">Monday 17 April 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
